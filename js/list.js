function vote(b){var c=b.split('_');var d=$('#'+c[1]+'-pop-'+c[2]).html();$('#'+c[1]+'-pop-'+c[2]).html('<img src="/img/load.gif" alt="Loading..."/>');$.post('/vote',{'id':b},function(a){if(a.message==''){$('#'+c[1]+'_'+c[2]).removeClass('demoted');$('#promote_'+c[1]+'_'+c[2]).removeClass('promoted');switch(a.value){case'1':$('#promote_'+c[1]+'_'+c[2]).addClass('promoted');break;case'-1':$('#'+c[1]+'_'+c[2]).addClass('demoted');break;default:break}$('#'+c[1]+'-pop-'+c[2]).fadeOut('fast',function(){$('#'+c[1]+'-pop-'+c[2]).html(a.vote_count).fadeIn('fast')})}else{$('#'+c[1]+'-pop-'+c[2]).fadeOut('fast',function(){$('#'+c[1]+'-pop-'+c[2]).html(d).fadeIn('fast')});alert(a.message)}},"json")}